{"ast":null,"code":"import { uniqueBy } from './filterRepeat';\nimport { API_KEY, BASE_URL } from './constants';\n\n// const getCurrentWeather = (lat, lon, setWeatherData, setLoading, setError) => {\n//     fetch(`https://api.weatherbit.io/v2.0/current?lat=${lat}&lon=${lon}&key=c2d3c64087e54d018cae06444bf6a848`)\n//     .then(data => data.json())\n//     .then(data => setWeatherData(data.data))\n//     .catch(() => {\n//         setLoading(false)\n//         setError(true)\n//     })\n//     .finally(() => setLoading(false))\n// }\nconst getCurrentWeather = (lat, lon) => {\n  return new Promise((resolve, reject) => {\n    fetch(`https://api.weatherbit.io/v2.0/current?lat=${lat}&lon=${lon}&key=c2d3c64087e54d018cae06444bf6a848`).then(data => resolve(data.json())).catch(err => reject(err));\n  });\n};\n\n//   const fetchData = (url) => {   // в хелпер \n//     return new Promise((resolve, reject) => {\n//       fetch(url)\n//         .then(data => resolve(data.json()))\n//         .catch(err => reject(err))\n//     })\n//   }\n\nconst getCurrentWeatherUrl = (lat, lon) => {\n  return `${BASE_URL}/current?lat=${lat}&lon=${lon}&key=${API_KEY}`;\n};\nconst getCurrentWeatherHourly = (lat, lon, setWeatherHourly, setLoading, setError) => {\n  fetch(`https://api.weatherbit.io/v2.0/forecast/hourly?lat=${lat}&lon=${lon}&key=c2d3c64087e54d018cae06444bf6a848`).then(data => data.json()).then(data => setWeatherHourly(data.data)).catch(() => {\n    setLoading(false);\n    setError(true);\n  }).finally(() => setLoading(false));\n};\nconst getCurrentWeatherDaily = (lat, lon, setWeatherSixteenDays, setLoading, setError) => {\n  fetch(`https://api.weatherbit.io/v2.0/forecast/daily?lat=${lat}&lon=${lon}&key=c2d3c64087e54d018cae06444bf6a848`).then(data => data.json()).then(data => setWeatherSixteenDays(data.data)).catch(() => {\n    setLoading(false);\n    setError(true);\n  }).finally(() => setLoading(false));\n};\nconst getCurrentNameCity = (lat, lon, setNameCity, setLoading, setError) => {\n  fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&accept-language=en`).then(data => data.json()).then(data => {\n    setNameCity(data.address.city);\n    setLoading(false);\n  }).catch(() => {\n    setLoading(false);\n    setError(true);\n  }).finally(() => setLoading(false));\n};\nconst getCurrentOptionsCities = (inputValue, setFound, setCityOptions, setCounter) => {\n  fetch(`http://api.geonames.org/searchJSON?name=${inputValue}&maxRows=100&username=mkskhjwssofwfjjcjw00&&&`) // lang=ru\n  .then(data => data.json()).then(data => {\n    const filteredCities = data.geonames.filter(filt => {\n      return filt.fclName === \"city, village,...\" && filt.fcodeName !== \"section of populated place\" && filt.lat && filt.lng && filt.name.toLowerCase().startsWith(inputValue.toLowerCase());\n    }).sort((a, b) => b.population - a.population);\n    const uniqueFilteredCities = uniqueBy(filteredCities, (o1, o2) => o1.name === o2.name && o1.adminName1 === o2.adminName1 && o1.countryName === o2.countryName);\n    uniqueFilteredCities.length === 0 ? setFound(true) : setFound(false);\n    if (uniqueFilteredCities.length <= 6) {\n      setCityOptions(uniqueFilteredCities);\n    }\n    if (uniqueFilteredCities.length > 6 && uniqueFilteredCities.length < 12) {\n      setCityOptions(uniqueFilteredCities.slice(0, 6));\n    }\n    if (uniqueFilteredCities.length > 12 && uniqueFilteredCities.length < 18) {\n      setCityOptions(uniqueFilteredCities.slice(0, 12));\n    }\n    if (uniqueFilteredCities.length > 18 && uniqueFilteredCities.length < 24) {\n      setCityOptions(uniqueFilteredCities.slice(0, 18));\n    }\n    if (uniqueFilteredCities.length > 24 && uniqueFilteredCities.length < 30) {\n      setCityOptions(uniqueFilteredCities.slice(0, 24));\n    }\n    if (uniqueFilteredCities.length > 30) {\n      setCityOptions(uniqueFilteredCities.slice(0, 30));\n    }\n    setCounter(-1);\n  }).catch(() => alert('error when searching for lists of cities'));\n};\nexport { getCurrentWeather, getCurrentWeatherHourly, getCurrentWeatherDaily, getCurrentNameCity, getCurrentOptionsCities, getCurrentWeatherUrl };","map":{"version":3,"names":["uniqueBy","API_KEY","BASE_URL","getCurrentWeather","lat","lon","Promise","resolve","reject","fetch","then","data","json","catch","err","getCurrentWeatherUrl","getCurrentWeatherHourly","setWeatherHourly","setLoading","setError","finally","getCurrentWeatherDaily","setWeatherSixteenDays","getCurrentNameCity","setNameCity","address","city","getCurrentOptionsCities","inputValue","setFound","setCityOptions","setCounter","filteredCities","geonames","filter","filt","fclName","fcodeName","lng","name","toLowerCase","startsWith","sort","a","b","population","uniqueFilteredCities","o1","o2","adminName1","countryName","length","slice","alert"],"sources":["C:/Users/Gold/Desktop/weather/src/helper/apiWeather.js"],"sourcesContent":["import { uniqueBy } from './filterRepeat' \r\nimport {API_KEY, BASE_URL} from './constants'\r\n\r\n// const getCurrentWeather = (lat, lon, setWeatherData, setLoading, setError) => {\r\n//     fetch(`https://api.weatherbit.io/v2.0/current?lat=${lat}&lon=${lon}&key=c2d3c64087e54d018cae06444bf6a848`)\r\n//     .then(data => data.json())\r\n//     .then(data => setWeatherData(data.data))\r\n//     .catch(() => {\r\n//         setLoading(false)\r\n//         setError(true)\r\n//     })\r\n//     .finally(() => setLoading(false))\r\n// }\r\nconst getCurrentWeather = (lat, lon) => {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`https://api.weatherbit.io/v2.0/current?lat=${lat}&lon=${lon}&key=c2d3c64087e54d018cae06444bf6a848`)\r\n        .then(data => resolve(data.json()))\r\n        .catch(err => reject(err))\r\n    })\r\n  }\r\n\r\n//   const fetchData = (url) => {   // в хелпер \r\n//     return new Promise((resolve, reject) => {\r\n//       fetch(url)\r\n//         .then(data => resolve(data.json()))\r\n//         .catch(err => reject(err))\r\n//     })\r\n//   }\r\n\r\nconst getCurrentWeatherUrl = (lat, lon) => {\r\n    return `${BASE_URL}/current?lat=${lat}&lon=${lon}&key=${API_KEY}`\r\n}\r\n\r\nconst getCurrentWeatherHourly = (lat, lon, setWeatherHourly, setLoading, setError) => {\r\n    fetch(`https://api.weatherbit.io/v2.0/forecast/hourly?lat=${lat}&lon=${lon}&key=c2d3c64087e54d018cae06444bf6a848`)\r\n        .then(data => data.json())\r\n        .then(data => setWeatherHourly(data.data))\r\n        .catch(() => {\r\n            setLoading(false)\r\n            setError(true)\r\n        })\r\n        .finally(() => setLoading(false))\r\n}\r\n\r\nconst getCurrentWeatherDaily = (lat, lon, setWeatherSixteenDays, setLoading, setError) => {\r\n    fetch(`https://api.weatherbit.io/v2.0/forecast/daily?lat=${lat}&lon=${lon}&key=c2d3c64087e54d018cae06444bf6a848`)\r\n        .then(data => data.json())\r\n        .then(data => setWeatherSixteenDays(data.data))\r\n        .catch(() => {\r\n            setLoading(false)\r\n            setError(true)\r\n        })\r\n        .finally(() => setLoading(false))\r\n}\r\n\r\nconst getCurrentNameCity = (lat, lon, setNameCity, setLoading, setError) => {\r\n    fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&accept-language=en`)\r\n        .then(data => data.json())\r\n        .then(data => {\r\n            setNameCity(data.address.city)\r\n            setLoading(false)\r\n        })\r\n        .catch(() => {\r\n            setLoading(false)\r\n            setError(true)\r\n        })\r\n        .finally(() => setLoading(false))\r\n}\r\n\r\nconst getCurrentOptionsCities = (inputValue, setFound, setCityOptions, setCounter) => {\r\n    fetch(`http://api.geonames.org/searchJSON?name=${inputValue}&maxRows=100&username=mkskhjwssofwfjjcjw00&&&`)  // lang=ru\r\n            .then(data => data.json())\r\n            .then(data => {\r\n                const filteredCities = data.geonames\r\n                    .filter(filt => {\r\n                        return filt.fclName === \"city, village,...\" \r\n                        && filt.fcodeName !== \"section of populated place\" \r\n                        && filt.lat && filt.lng \r\n                        && filt.name.toLowerCase().startsWith(inputValue.toLowerCase())\r\n                    })\r\n                    .sort((a,b)=> b.population - a.population)\r\n                const uniqueFilteredCities = uniqueBy(filteredCities, (o1, o2) => o1.name === o2.name && o1.adminName1 === o2.adminName1 && o1.countryName === o2.countryName)\r\n                uniqueFilteredCities.length === 0 ? setFound(true) : setFound(false)\r\n                if(uniqueFilteredCities.length <= 6){\r\n                    setCityOptions(uniqueFilteredCities)\r\n                }\r\n                if(uniqueFilteredCities.length > 6 && uniqueFilteredCities.length < 12){\r\n                    setCityOptions(uniqueFilteredCities.slice(0, 6))\r\n                }\r\n                if(uniqueFilteredCities.length > 12 && uniqueFilteredCities.length < 18){\r\n                    setCityOptions(uniqueFilteredCities.slice(0, 12))\r\n                }\r\n                if(uniqueFilteredCities.length > 18 && uniqueFilteredCities.length < 24){\r\n                    setCityOptions(uniqueFilteredCities.slice(0, 18))\r\n                }\r\n                if(uniqueFilteredCities.length > 24 && uniqueFilteredCities.length < 30){\r\n                    setCityOptions(uniqueFilteredCities.slice(0, 24))\r\n                }\r\n                if(uniqueFilteredCities.length > 30){\r\n                    setCityOptions(uniqueFilteredCities.slice(0, 30))\r\n                }\r\n                setCounter(-1)\r\n            })\r\n            .catch(() => alert('error when searching for lists of cities'))\r\n}\r\n\r\nexport {getCurrentWeather, getCurrentWeatherHourly, getCurrentWeatherDaily, getCurrentNameCity, getCurrentOptionsCities, getCurrentWeatherUrl}"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,gBAAgB;AACzC,SAAQC,OAAO,EAAEC,QAAQ,QAAO,aAAa;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,iBAAiB,GAAGA,CAACC,GAAG,EAAEC,GAAG,KAAK;EACpC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtCC,KAAK,CAAE,8CAA6CL,GAAI,QAAOC,GAAI,uCAAsC,CAAC,CACvGK,IAAI,CAACC,IAAI,IAAIJ,OAAO,CAACI,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAClCC,KAAK,CAACC,GAAG,IAAIN,MAAM,CAACM,GAAG,CAAC,CAAC;EAC9B,CAAC,CAAC;AACJ,CAAC;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,oBAAoB,GAAGA,CAACX,GAAG,EAAEC,GAAG,KAAK;EACvC,OAAQ,GAAEH,QAAS,gBAAeE,GAAI,QAAOC,GAAI,QAAOJ,OAAQ,EAAC;AACrE,CAAC;AAED,MAAMe,uBAAuB,GAAGA,CAACZ,GAAG,EAAEC,GAAG,EAAEY,gBAAgB,EAAEC,UAAU,EAAEC,QAAQ,KAAK;EAClFV,KAAK,CAAE,sDAAqDL,GAAI,QAAOC,GAAI,uCAAsC,CAAC,CAC7GK,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAACC,IAAI,IAAIM,gBAAgB,CAACN,IAAI,CAACA,IAAI,CAAC,CAAC,CACzCE,KAAK,CAAC,MAAM;IACTK,UAAU,CAAC,KAAK,CAAC;IACjBC,QAAQ,CAAC,IAAI,CAAC;EAClB,CAAC,CAAC,CACDC,OAAO,CAAC,MAAMF,UAAU,CAAC,KAAK,CAAC,CAAC;AACzC,CAAC;AAED,MAAMG,sBAAsB,GAAGA,CAACjB,GAAG,EAAEC,GAAG,EAAEiB,qBAAqB,EAAEJ,UAAU,EAAEC,QAAQ,KAAK;EACtFV,KAAK,CAAE,qDAAoDL,GAAI,QAAOC,GAAI,uCAAsC,CAAC,CAC5GK,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAACC,IAAI,IAAIW,qBAAqB,CAACX,IAAI,CAACA,IAAI,CAAC,CAAC,CAC9CE,KAAK,CAAC,MAAM;IACTK,UAAU,CAAC,KAAK,CAAC;IACjBC,QAAQ,CAAC,IAAI,CAAC;EAClB,CAAC,CAAC,CACDC,OAAO,CAAC,MAAMF,UAAU,CAAC,KAAK,CAAC,CAAC;AACzC,CAAC;AAED,MAAMK,kBAAkB,GAAGA,CAACnB,GAAG,EAAEC,GAAG,EAAEmB,WAAW,EAAEN,UAAU,EAAEC,QAAQ,KAAK;EACxEV,KAAK,CAAE,+DAA8DL,GAAI,QAAOC,GAAI,qBAAoB,CAAC,CACpGK,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAACC,IAAI,IAAI;IACVa,WAAW,CAACb,IAAI,CAACc,OAAO,CAACC,IAAI,CAAC;IAC9BR,UAAU,CAAC,KAAK,CAAC;EACrB,CAAC,CAAC,CACDL,KAAK,CAAC,MAAM;IACTK,UAAU,CAAC,KAAK,CAAC;IACjBC,QAAQ,CAAC,IAAI,CAAC;EAClB,CAAC,CAAC,CACDC,OAAO,CAAC,MAAMF,UAAU,CAAC,KAAK,CAAC,CAAC;AACzC,CAAC;AAED,MAAMS,uBAAuB,GAAGA,CAACC,UAAU,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,UAAU,KAAK;EAClFtB,KAAK,CAAE,2CAA0CmB,UAAW,+CAA8C,CAAC,CAAE;EAAA,CACpGlB,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAACC,IAAI,IAAI;IACV,MAAMqB,cAAc,GAAGrB,IAAI,CAACsB,QAAQ,CAC/BC,MAAM,CAACC,IAAI,IAAI;MACZ,OAAOA,IAAI,CAACC,OAAO,KAAK,mBAAmB,IACxCD,IAAI,CAACE,SAAS,KAAK,4BAA4B,IAC/CF,IAAI,CAAC/B,GAAG,IAAI+B,IAAI,CAACG,GAAG,IACpBH,IAAI,CAACI,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,UAAU,CAACb,UAAU,CAACY,WAAW,CAAC,CAAC,CAAC;IACnE,CAAC,CAAC,CACDE,IAAI,CAAC,CAACC,CAAC,EAACC,CAAC,KAAIA,CAAC,CAACC,UAAU,GAAGF,CAAC,CAACE,UAAU,CAAC;IAC9C,MAAMC,oBAAoB,GAAG9C,QAAQ,CAACgC,cAAc,EAAE,CAACe,EAAE,EAAEC,EAAE,KAAKD,EAAE,CAACR,IAAI,KAAKS,EAAE,CAACT,IAAI,IAAIQ,EAAE,CAACE,UAAU,KAAKD,EAAE,CAACC,UAAU,IAAIF,EAAE,CAACG,WAAW,KAAKF,EAAE,CAACE,WAAW,CAAC;IAC9JJ,oBAAoB,CAACK,MAAM,KAAK,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC,GAAGA,QAAQ,CAAC,KAAK,CAAC;IACpE,IAAGiB,oBAAoB,CAACK,MAAM,IAAI,CAAC,EAAC;MAChCrB,cAAc,CAACgB,oBAAoB,CAAC;IACxC;IACA,IAAGA,oBAAoB,CAACK,MAAM,GAAG,CAAC,IAAIL,oBAAoB,CAACK,MAAM,GAAG,EAAE,EAAC;MACnErB,cAAc,CAACgB,oBAAoB,CAACM,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACpD;IACA,IAAGN,oBAAoB,CAACK,MAAM,GAAG,EAAE,IAAIL,oBAAoB,CAACK,MAAM,GAAG,EAAE,EAAC;MACpErB,cAAc,CAACgB,oBAAoB,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACrD;IACA,IAAGN,oBAAoB,CAACK,MAAM,GAAG,EAAE,IAAIL,oBAAoB,CAACK,MAAM,GAAG,EAAE,EAAC;MACpErB,cAAc,CAACgB,oBAAoB,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACrD;IACA,IAAGN,oBAAoB,CAACK,MAAM,GAAG,EAAE,IAAIL,oBAAoB,CAACK,MAAM,GAAG,EAAE,EAAC;MACpErB,cAAc,CAACgB,oBAAoB,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACrD;IACA,IAAGN,oBAAoB,CAACK,MAAM,GAAG,EAAE,EAAC;MAChCrB,cAAc,CAACgB,oBAAoB,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACrD;IACArB,UAAU,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CACDlB,KAAK,CAAC,MAAMwC,KAAK,CAAC,0CAA0C,CAAC,CAAC;AAC3E,CAAC;AAED,SAAQlD,iBAAiB,EAAEa,uBAAuB,EAAEK,sBAAsB,EAAEE,kBAAkB,EAAEI,uBAAuB,EAAEZ,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}